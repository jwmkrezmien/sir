{% extends 'PwcSirBundle::base.html.twig' %}

{% block contentBody %}
<ul class="versions">
    {% for version in versions %}
    <li class="version">
        <div class="infobar">
            <p>
                <span class="label {{ version.labelClass }}">{{ version.action }}</span><span class="bold {{ version.objectName }}">{{ version.objectLabel|trans }}</span>
                {% if version.hasAlterations %}
                    <a class="pull-right" href="{{ path('vulnerability_revert', { 'slug': entity.slug, 'entityName': version.objectName, 'entityId': version.identifierOfCurrent, 'entityVersion': version.version }) }}">{{ 'form.general.link.revert'|trans({'%version%': version.version}) }}</a>
                {% else %}
                    <span class="pull-right">{{ 'form.general.version'|trans({'%version%': version.version}) }}</span>
                {% endif %}
            </p>
            <p class="subscript">Revision on {{ version.loggedAt|date("d-m-Y H:i") }} by {{ version.username }}</p>
        </div>
        <ul class="entity index">
            {% for modification in version.modifications %}
            <li class="detail"><span class="title pull-center">{{ version.convertToLabel(modification)|trans }}</span> {{ version.currentAttributeValue(modification)|trans }} {% if version.affectedByReversion(modification) %}<i class="icon-double-angle-right"></i>{{ modification.value|trans }}{% endif %}</li>
            {% endfor %}
        </ul>
    </li>
    {% endfor %}
</ul>
{% endblock contentBody %}