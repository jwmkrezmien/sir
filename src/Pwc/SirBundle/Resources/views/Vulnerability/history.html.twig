{% extends 'PwcSirBundle:Division:one-large.html.twig' %}

{% block contentBody %}
<div class="well">
    <ul class="versions">
        {% for version in versions %}
        <li class="version">
            <div class="infobar">
                <p>
                    <span class="label {{ version.labelClass }}">{{ version.action }}</span><span class="bold {{ version.objectName }}">{{ version.objectLabel|transchoice(1) }}</span>
                    {% if version.hasAlterations %}
                        <a class="pull-right" href="{{ path('vulnerability_revert', { 'slug': entity.slug, 'entityType': version.objectName, 'entitySlug': version.identifierOfCurrent, 'entityVersion': version.version }) }}">{{ 'form.general.link.revert'|trans({'%version%': version.version}) }}</a>
                    {% else %}
                        <span class="pull-right">{{ 'form.general.version'|trans({'%version%': version.version}) }}</span>
                    {% endif %}
                </p>
                <p class="subscript">Revision on {{ version.loggedAt|date("d-m-Y H:i") }} by {{ version.username }}</p>
            </div>
            <ul class="entity index">
                {% for modification in version.modifications %}
                <li class="detail"><span class="title pull-left">{{ version.convertToLabel(modification)|trans }}</span> <span class="value">{{ version.currentAttributeValue(modification)|trans|nl2br }} {% if version.affectedByReversion(modification) %}<i class="icon-double-angle-right"></i>{{ modification.value|trans|nl2br }}{% endif %}</span></li>
                {% endfor %}
            </ul>
        </li>
        {% endfor %}
    </ul>
</div>
{% endblock contentBody %}